<div class="game-2048" id="game-container" style="
    --primary-clr: <%= @aesthetic.colors[0] %>; 
    --secondary-clr: <%= @aesthetic.colors[1] %>; 
    --font-clr: <%= @aesthetic.colors[2] %>;
    --font: <%= @aesthetic.font %>;
">

  <div style="flex: 1; text-align: center;">
    <h1>2048</h1>
  </div>

  <div class="game-header">
    <div class="score-container">
      <div class="score-label">SCORE</div>
      <div id="score">3200</div>
    </div>
  </div>

  <div class="game-board">
    <div class="board-row">
      <div class="board-cell tile-2">2</div>
      <div class="board-cell tile-4">4</div>
      <div class="board-cell tile-8">8</div>
      <div class="board-cell tile-16">16</div>
    </div>
    <div class="board-row">
      <div class="board-cell tile-32">32</div>
      <div class="board-cell tile-64">64</div>
      <div class="board-cell tile-128">128</div>
      <div class="board-cell tile-256">256</div>
    </div>
    <div class="board-row">
      <div class="board-cell tile-512">512</div>
      <div class="board-cell tile-1024">1024</div>
      <div class="board-cell tile-2048">2048</div>
      <div class="board-cell"></div>
    </div>
    <div class="board-row">
      <div class="board-cell"></div>
      <div class="board-cell"></div>
      <div class="board-cell"></div>
      <div class="board-cell"></div>
    </div>
  </div>
</div>

<script>
// Remove any existing game event listeners
if (window.game2048) {
  window.game2048.removeEventListeners();
}

// Prevent arrow keys
document.addEventListener('keydown', function(e) {
  if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
    e.preventDefault();
    e.stopPropagation();
    return false;
  }
}, true);

// Prevent touch events
document.getElementById('game-container').addEventListener('touchstart', function(e) {
  e.preventDefault();
  e.stopPropagation();
  return false;
}, true);

document.getElementById('game-container').addEventListener('touchmove', function(e) {
  e.preventDefault();
  e.stopPropagation();
  return false;
}, true);
</script>
